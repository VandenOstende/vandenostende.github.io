<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Dashboard – GPX Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .charts-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 20px; }
    .chart-card { grid-column: span 6; background: rgba(30,41,59,0.85); border: 1px solid rgba(148,163,184,0.2); border-radius: 12px; padding: 16px; backdrop-filter: blur(10px); }
    .chart-card h3 { margin: 0 0 8px; font-size: 1.1rem; color: #f1f5f9; }
    /* Mobiel-vriendelijke hoogte voor de chart */
    .chart-wrap { position: relative; height: 320px; }
    @media (max-width: 900px){
      .chart-wrap { height: min(48dvh, 380px); }
    }
    @media (max-width: 900px) { .chart-card { grid-column: span 12; } }
  </style>
  <!-- Firebase (compat) SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script>
    // Zelfde config als de tracker-pagina
    window.FIREBASE_CONFIG = {
      apiKey: "AIzaSyBLJyOGvw5m-yJl28YUjsAUzwVvcWLBT2M",
      authDomain: "gpxtrackingapp.firebaseapp.com",
      projectId: "gpxtrackingapp",
      storageBucket: "gpxtrackingapp.firebasestorage.app",
      messagingSenderId: "714787098101",
      appId: "1:714787098101:web:e6e5fd7b75dabafcd424bc"
    };
  </script>
</head>
<body>
  <header class="app-header">
    <div class="header-content">
      <div class="header-group">
        <h1 class="header-title">Dashboard</h1>
      </div>
    </div>
  </header>

  <main class="dashboard">
    <section class="info-card info-card--wide">
      <div class="km-card__header">
        <h2 style="margin:0;">Overzicht kilometers</h2>
        <button id="km-toggle" class="icon-btn km-toggle-btn" aria-expanded="true" aria-controls="km-card-body" aria-label="Inklappen of uitklappen">
          ▾
        </button>
      </div>
      <div id="km-card-body">
      <p style="margin-top:6px;color:#cbd5e1">Kies de periode en bekijk je afgelegde kilometers.</p>
      <div id="charts-status" style="margin-top:8px;color:#94a3b8"></div>
      <div class="segmented" role="tablist" aria-label="Periode selecteren" style="margin-top:12px;">
        <button id="tab-day" role="tab" aria-selected="false" data-type="day">Dag</button>
        <button id="tab-week" role="tab" aria-selected="true" data-type="week" class="active">Week</button>
        <button id="tab-month" role="tab" aria-selected="false" data-type="month">Maand</button>
        <button id="tab-year" role="tab" aria-selected="false" data-type="year">Jaar</button>
      </div>
      <div class="chart-type-toggle" role="group" aria-label="Grafiektype" style="margin-top:8px;display:flex;gap:8px;align-items:center;">
        <span class="muted" style="font-size:.95rem;">Type:</span>
        <div class="chip-group" aria-label="Kies grafiektype">
          <button id="type-line" class="chip active" data-chart="line" aria-pressed="true">Lijn</button>
          <button id="type-bar" class="chip" data-chart="bar" aria-pressed="false">Staaf</button>
        </div>
      </div>
      <div id="chart-summary" class="chart-summary" aria-live="polite" style="margin-top:10px;">
        <!-- Totaal in periode verschijnt hier -->
      </div>
      <div id="period-controls" class="period-controls" style="margin-top:8px;display:flex;gap:8px;align-items:center;">
        <select id="select-month" class="period-select hidden" aria-label="Kies maand"></select>
        <select id="select-year" class="period-select hidden" aria-label="Kies jaar"></select>
      </div>
      <div class="chart-card" style="margin-top:12px;">
        <div class="chart-wrap"><canvas id="main-chart"></canvas></div>
      </div>
      </div>
    </section>

    <section class="info-card">
      <h2>Snelkoppelingen</h2>
      <a class="card-link card-link--accent-blue" href="GPXTracker.html" aria-label="Ga naar Ritten en Kaart">
        <div class="card-link__icon" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="presentation">
            <path d="M4 18l5-2 6 2 5-2V6l-5 2-6-2-5 2v10z" stroke="white" stroke-opacity="0.95" stroke-width="1.6" stroke-linejoin="round"/>
            <path d="M9 8l6 2m0 0v8m0-8l5-2M9 8v8m0-8L4 6" stroke="white" stroke-opacity="0.55" stroke-width="1.3"/></svg>
        </div>
        <div class="card-link__content">
          <div class="card-link__title">Ritten & Kaart</div>
          <div class="card-link__desc">Upload GPX, bekijk routes op de kaart en beheer ritten.</div>
        </div>
        <div class="card-link__cta">Open →</div>
      </a>
      <a class="card-link card-link--accent-green" href="GPXTracker.html#add" aria-label="Voeg meteen een GPX-bestand toe">
        <div class="card-link__icon" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" role="presentation">
            <path d="M12 5v14M5 12h14" stroke="white" stroke-opacity="0.95" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="card-link__content">
          <div class="card-link__title">Nieuwe GPX toevoegen</div>
          <div class="card-link__desc">Open direct de upload en voeg een nieuwe rit toe.</div>
        </div>
        <div class="card-link__cta">Add →</div>
      </a>
    </section>
  </main>

  <script src="dashboard.js"></script>
</body>
</html>
